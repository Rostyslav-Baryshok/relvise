{"mappings":"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","sources":["src/js/spoller.js"],"sourcesContent":["// SPOLLERS\nconst spollersArray = document.querySelectorAll('[data-spollers]');\nif (spollersArray.length > 0) {\n  // Получение обычных слойлеров\n  const spollersRegular = Array.from(spollersArray).filter(function (\n    item,\n    index,\n    self\n  ) {\n    return !item.dataset.spollers.split(',')[0];\n  });\n  // Инициализация обычных слойлеров\n  if (spollersRegular.length > 0) {\n    initSpollers(spollersRegular);\n  }\n\n  // Получение слойлеров с медиа запросами\n  const spollersMedia = Array.from(spollersArray).filter(function (\n    item,\n    index,\n    self\n  ) {\n    return item.dataset.spollers.split(',')[0];\n  });\n\n  // Инициализация слойлеров с медиа запросами\n  if (spollersMedia.length > 0) {\n    const breakpointsArray = [];\n    spollersMedia.forEach(item => {\n      const params = item.dataset.spollers;\n      const breakpoint = {};\n      const paramsArray = params.split(',');\n      breakpoint.value = paramsArray[0];\n      breakpoint.type = paramsArray[1] ? paramsArray[1].trim() : 'max';\n      breakpoint.item = item;\n      breakpointsArray.push(breakpoint);\n    });\n\n    // Получаем уникальные брейкпоинты\n    let mediaQueries = breakpointsArray.map(function (item) {\n      return (\n        '(' +\n        item.type +\n        '-width: ' +\n        item.value +\n        'px),' +\n        item.value +\n        ',' +\n        item.type\n      );\n    });\n    mediaQueries = mediaQueries.filter(function (item, index, self) {\n      return self.indexOf(item) === index;\n    });\n\n    // Работаем с каждым брейкпоинтом\n    mediaQueries.forEach(breakpoint => {\n      const paramsArray = breakpoint.split(',');\n      const mediaBreakpoint = paramsArray[1];\n      const mediaType = paramsArray[2];\n      const matchMedia = window.matchMedia(paramsArray[0]);\n\n      // Объекты с нужными условиями\n      const spollersArray = breakpointsArray.filter(function (item) {\n        if (item.value === mediaBreakpoint && item.type === mediaType) {\n          return true;\n        }\n      });\n      // Событие\n      matchMedia.addListener(function () {\n        initSpollers(spollersArray, matchMedia);\n      });\n      initSpollers(spollersArray, matchMedia);\n    });\n  }\n  // Инициализация\n  function initSpollers(spollersArray, matchMedia = false) {\n    spollersArray.forEach(spollersBlock => {\n      spollersBlock = matchMedia ? spollersBlock.item : spollersBlock;\n      if (matchMedia.matches || !matchMedia) {\n        spollersBlock.classList.add('_init');\n        initSpollerBody(spollersBlock);\n        spollersBlock.addEventListener('click', setSpollerAction);\n      } else {\n        spollersBlock.classList.remove('_init');\n        initSpollerBody(spollersBlock, false);\n        spollersBlock.removeEventListener('click', setSpollerAction);\n      }\n    });\n  }\n  // Работа с контентом\n  function initSpollerBody(spollersBlock, hideSpollerBody = true) {\n    const spollerTitles = spollersBlock.querySelectorAll('[data-spoller]');\n    if (spollerTitles.length > 0) {\n      spollerTitles.forEach(spollerTitle => {\n        if (hideSpollerBody) {\n          spollerTitle.removeAttribute('tabindex');\n          if (!spollerTitle.classList.contains('_active')) {\n            spollerTitle.nextElementSibling.hidden = true;\n          }\n        } else {\n          spollerTitle.setAttribute('tabindex', '-1');\n          spollerTitle.nextElementSibling.hidden = false;\n        }\n      });\n    }\n  }\n  function setSpollerAction(e) {\n    const el = e.target;\n    if (el.hasAttribute('data-spoller') || el.closest('[data-spoller]')) {\n      const spollerTitle = el.hasAttribute('data-spoller')\n        ? el\n        : el.closest('[data-spoller]');\n      const spollersBlock = spollerTitle.closest('[data-spollers]');\n      const oneSpoller = spollersBlock.hasAttribute('data-one-spoller')\n        ? true\n        : false;\n      if (!spollersBlock.querySelectorAll('._slide').length) {\n        if (oneSpoller && !spollerTitle.classList.contains('_active')) {\n          hideSpollersBody(spollersBlock);\n        }\n        spollerTitle.classList.toggle('_active');\n        _slideToggle(spollerTitle.nextElementSibling, 500);\n      }\n      e.preventDefault();\n    }\n  }\n  function hideSpollersBody(spollersBlock) {\n    const spollerActiveTitle = spollersBlock.querySelector(\n      '[data-spoller]._active'\n    );\n    if (spollerActiveTitle) {\n      spollerActiveTitle.classList.remove('_active');\n      _slideUp(spollerActiveTitle.nextElementSibling, 500);\n    }\n  }\n}\n//========================================================================================================================================================\n//SlideToggle\nlet _slideUp = (target, duration = 500) => {\n  if (!target.classList.contains('_slide')) {\n    target.classList.add('_slide');\n    target.style.transitionProperty = 'height, margin, padding';\n    target.style.transitionDuration = duration + 'ms';\n    target.style.height = target.offsetHeight + 'px';\n    target.offsetHeight;\n    target.style.overflow = 'hidden';\n    target.style.height = 0;\n    target.style.paddingTop = 0;\n    target.style.paddingBottom = 0;\n    target.style.marginTop = 0;\n    target.style.marginBottom = 0;\n    window.setTimeout(() => {\n      target.hidden = true;\n      target.style.removeProperty('height');\n      target.style.removeProperty('padding-top');\n      target.style.removeProperty('padding-bottom');\n      target.style.removeProperty('margin-top');\n      target.style.removeProperty('margin-bottom');\n      target.style.removeProperty('overflow');\n      target.style.removeProperty('transition-duration');\n      target.style.removeProperty('transition-property');\n      target.classList.remove('_slide');\n    }, duration);\n  }\n};\nlet _slideDown = (target, duration = 500) => {\n  if (!target.classList.contains('_slide')) {\n    target.classList.add('_slide');\n    if (target.hidden) {\n      target.hidden = false;\n    }\n    let height = target.offsetHeight;\n    target.style.overflow = 'hidden';\n    target.style.height = 0;\n    target.style.paddingTop = 0;\n    target.style.paddingBottom = 0;\n    target.style.marginTop = 0;\n    target.style.marginBottom = 0;\n    target.offsetHeight;\n    target.style.transitionProperty = 'height, margin, padding';\n    target.style.transitionDuration = duration + 'ms';\n    target.style.height = height + 'px';\n    target.style.removeProperty('padding-top');\n    target.style.removeProperty('padding-bottom');\n    target.style.removeProperty('margin-top');\n    target.style.removeProperty('margin-bottom');\n    window.setTimeout(() => {\n      target.style.removeProperty('height');\n      target.style.removeProperty('overflow');\n      target.style.removeProperty('transition-duration');\n      target.style.removeProperty('transition-property');\n      target.classList.remove('_slide');\n    }, duration);\n  }\n};\nlet _slideToggle = (target, duration = 500) => {\n  if (target.hidden) {\n    return _slideDown(target, duration);\n  } else {\n    return _slideUp(target, duration);\n  }\n};\n\n//========================================================================================================================================================\n/*\nДля родителя слойлеров пишем атрибут data-spollers\nДля заголовков слойлеров пишем атрибут data-spoller\nЕсли нужно включать\\выключать работу спойлеров на разных размерах экранов\nпишем параметры ширины и типа брейкпоинта.\nНапример:\ndata-spollers=\"992,max\" - спойлеры будут работать только на экранах меньше или равно 992px\ndata-spollers=\"768,min\" - спойлеры будут работать только на экранах больше или равно 768px\n\nЕсли нужно что бы в блоке открывался болько один слойлер добавляем атрибут data-one-spoller\n*/\n"],"names":["$697593c7dde94342$var$spollersArray","document","querySelectorAll","length","spollersRegular","Array","from","filter","item","index","self","dataset","spollers","split","$697593c7dde94342$var$initSpollers","spollersMedia","breakpointsArray","forEach","breakpoint","paramsArray","value","type","trim","push","mediaQueries","map","indexOf","mediaBreakpoint","mediaType","matchMedia","window","spollersArray1","addListener","spollersArray2","spollersBlock","matches","classList","add","$697593c7dde94342$var$initSpollerBody","addEventListener","$697593c7dde94342$var$setSpollerAction","remove","removeEventListener","hideSpollerBody","spollerTitles","spollerTitle","removeAttribute","contains","nextElementSibling","hidden","setAttribute","e","el","target","hasAttribute","closest","oneSpoller","spollerActiveTitle","querySelector","$697593c7dde94342$var$_slideUp","$697593c7dde94342$var$hideSpollersBody","toggle","$697593c7dde94342$var$_slideToggle","preventDefault","duration","style","transitionProperty","transitionDuration","height","offsetHeight","overflow","paddingTop","paddingBottom","marginTop","marginBottom","setTimeout","removeProperty","$697593c7dde94342$var$_slideDown"],"version":3,"file":"index.b0b96b47.js.map"}